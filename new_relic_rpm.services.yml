services:
  new_relic_rpm.exception_subscriber:
    class: Drupal\new_relic_rpm\EventSubscriber\ExceptionSubscriber
    arguments: ['@new_relic_rpm.adapter']
    tags:
      -
        name: event_subscriber
  new_relic_rpm.logger:
    class: Drupal\new_relic_rpm\Logger\NewRelicLogger
    arguments: ['@logger.log_message_parser', '@new_relic_rpm.adapter']
    tags:
      -
        name: logger
  new_relic_rpm.request_subscriber:
    class: Drupal\new_relic_rpm\EventSubscriber\NewRelicRequestSubscriber
    arguments: ['@new_relic_rpm.adapter', '@path.matcher', '@config.factory', '@path.current', '@current_route_match']
    tags:
      -
        name: event_subscriber

  new_relic_rpm.adapter:
    class: Drupal\new_relic_rpm\ExtensionAdapter\NewRelicAdapterInterface
    factory: Drupal\new_relic_rpm\ExtensionAdapter\AdapterFactory::getAdapter
